<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Three.js exploration</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/style.css">
  </head>  
  <body>
    <script src="https://threejs.org/build/three.js"></script>
    <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>    
    <script type='text/javascript'>
    /*
  Created upon Yuri's deconstruction, make sure to watch it:
  https://www.youtube.com/watch?v=esgRzxghD0Q
  
  Also, if you want to know more about instantiating and draw calls:
  https://velasquezdaniel.com/blog/rendering-100k-spheres-instantianing-and-draw-calls/
  
  Play with it! :)
*/

let camera, scene, renderer, controls;

init();
animate();

function init() {
  camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.set(0, 0, 50);

  scene = new THREE.Scene();

  renderer = new THREE.WebGLRenderer({
    antialias: true,
    alpha: true,
  });
  renderer.setClearColor(0x000000, 1);
  renderer.setPixelRatio(window.devicePixelRatio);
  document.body.appendChild(renderer.domElement);

  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.autoRotate= true
  controls.autoRotateSpeed = 1
  
  
  // Base Geometry
  const baseGeometry = new THREE.BoxBufferGeometry(10, 10,10, 1, 1);

  let video = document.createElement('video')
  video.src = 'https://cdn.glitch.com/aa6d668d-b305-42dc-af1d-be9b3b2a7d7e%2Fsintel.mp4?v=1592955079992'
  video.play()
  let tex = new THREE.VideoTexture(video)
  let material = new THREE.MeshBasicMaterial({map:tex})
  // Mesh
  const mesh = new THREE.Mesh(baseGeometry, material);
  mesh.rotation.x = -Math.PI*.5
  scene.add(mesh);

  onWindowResize();
  window.addEventListener('resize', onWindowResize, false);
}

function onWindowResize(event) {
  let width = window.innerWidth;
  let height = window.innerHeight;

  camera.aspect = width / height;
  camera.updateProjectionMatrix();
  renderer.setSize(width, height);  
}

function animate() {
  requestAnimationFrame(animate);
  render(); 
}

function render() {
  controls.update()
  renderer.render(scene, camera);
}
    </script>
  </body>
</html>
